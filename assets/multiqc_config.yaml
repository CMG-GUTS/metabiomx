report_comment: >
  This report has been generated by the <a href="https://github.com/CMG-GUTS/metabiomx"
  target="_blank"><MetaBIOMx</a> analysis pipeline.

table_sample_merge:
  "R1": "_1"
  "R2": "_2"
  "trim": ".settings"
  "aligned": "_bowtie2"

disable_version_detection: true
data_format: "yaml"

run_modules:
  - fastqc
  - adapterremoval
  - trimmomatic
  - custom_content
  - bowtie2
  - busco

top_modules:
  - "fastqc":
      name: "FastQC: raw reads"
      path_filters:
        - "*_fastqc.zip"
  - "fastqc":
      name: "FastQC: trimmed reads"
      path_filters:
        - "*_trim_*_fastqc.zip"
  - "fastqc":
      name: "FastQC: Host removed reads"
      path_filters:
        - "*_decon_*_fastqc.zip"
  - "adapterremoval":
      name: "Read trimming via AdapterRemoval"
      path_filters:
        - "*.settings"
  - "trimmomatic":
      name: "Read trimming via Trimmomatic"
  - "busco":
      name: "MetaSpades: Contig Quality Control via BUSCO"
  - "bowtie2":
      name: "MetaSpades: Reads Aligned Against Contigs"
      path_filters:
        - "*_bowtie2.log"
  - custom_content

table_columns_name:
  "FastQC: raw reads":
    percent_duplicates: "% Dups (raw)"
    percent_gc: "% GC (raw)"
    avg_sequence_length: "Avg. length (raw)"
    median_sequence_length: "Median length (raw)"
    total_sequences: "M Seqs (raw)"
    percent_fails: "% Fails (raw)"
  "FastQC: trimmed reads":
    percent_duplicates: "% Dups (trim)"
    percent_gc: "% GC (trim)"
    avg_sequence_length: "Avg. length (trim)"
    median_sequence_length: "Median length (trim)"
    total_sequences: "M Seqs (trim)"
    percent_fails: "% Fails (trim)"
  "FastQC: Host removed reads":
    percent_duplicates: "% Dups (decon)"
    percent_gc: "% GC (decon)"
    avg_sequence_length: "Avg. length (decon)"
    median_sequence_length: "Median length (decon)"
    total_sequences: "M Seqs (decon)"
    percent_fails: "% Fails (decon)"

extra_fn_clean_exts:
  - type: regex
    pattern: "_bowtie2.log$"
    module: bowtie2
  - type: regex
    pattern: "\\.settings$"
    module: adapterremoval

custom_data:
  dada2_stats:
    file_format: "tsv"
    section_name: "DADA2 Read Stats"
    descrition: "Read statistics of DADA2 filtering, denoising and removal of chimeric reads"
    plot_type: "table"
    pconfig:
      headers:
        - sample
        - input
        - filtered
        - denoised
        - nonchim
  dada2_profiles:
    file_format: "png"
    parent_id: dada2_stats
    section_name: "Error Profiles"
    description: "Learned Error rates from the first batch"
    plot_type: "image"
  pipeline_parameters:
    file_format: "tsv"
    section_name: "Pipeline parameters"
    description: "Specified input parameters by the nextflow pipeline. Also non-default software options"
    plot_type: "table"
    pconfig:
      headers:
        - Parameter
        - Value
  versions:
    file_format: "tsv"
    section_name: "Pipeline software versions"
    plot_type: "table"
    pconfig:
      headers:
        - Software
        - Version

sp:
  pipeline_parameters:
    fn: "pipeline_params.tsv"
  versions:
    fn: "software_versions.tsv"